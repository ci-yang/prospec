# Tasks Format Reference

This document defines the expected format for `tasks.md`, used by the **prospec-tasks** Skill.

---

## Purpose

`tasks.md` breaks down `plan.md` implementation steps into concrete development tasks with complexity estimates and dependency markers.

---

## Standard Format

### 1. Checkbox Format

Use Markdown checkbox syntax:

```markdown
- [ ] Pending task
- [x] Completed task
```

---

### 2. Architecture-Layer Grouping

Group tasks by architecture layer in recommended order:

```markdown
## Types

- [ ] [Task description] ~{lines} lines

## Lib

- [ ] [Task description] ~{lines} lines

## Services

- [ ] [Task description] ~{lines} lines

## CLI

- [ ] [Task description] ~{lines} lines

## Tests

- [ ] [Task description] ~{lines} lines
```

**Example:**

```markdown
## Types

- [ ] Define ErrorType enum (ValidationError, NotFoundError, etc.) ~30 lines
- [ ] Create ErrorResponse interface for API responses ~20 lines

## Lib

- [ ] [P] Implement BaseError class with error code mapping ~50 lines
- [ ] [P] Implement ErrorFormatter utility ~40 lines
- [ ] Create error factory functions (createValidationError, etc.) ~60 lines

## Services

- [ ] Integrate error handler with API middleware ~80 lines
- [ ] Update existing error handling in UserService ~40 lines
- [ ] Update existing error handling in AuthService ~40 lines

## CLI

- [ ] Add error code reference to CLI help command ~20 lines

## Tests

- [ ] [P] Write unit tests for BaseError class ~60 lines
- [ ] [P] Write unit tests for ErrorFormatter ~50 lines
- [ ] Write integration tests for API error responses ~100 lines
```

---

### 3. Parallelizable Task Markers

Use `[P]` to mark tasks that can be executed in parallel (no dependencies):

```markdown
- [ ] [P] Parallelizable task 1 ~50 lines
- [ ] [P] Parallelizable task 2 ~50 lines
```

---

### 4. Complexity Estimate Format

Use `~{lines} lines` to estimate complexity:

```markdown
- [ ] Simple task ~20 lines
- [ ] Medium task ~50 lines
- [ ] Complex task ~100 lines
```

---

### 5. Summary Section

Add a summary at the end of the file:

```markdown
## Summary

- **Total Tasks:** {total task count}
- **Parallelizable Tasks:** {parallelizable task count}
- **Total Estimated Lines:** ~{total estimated lines} lines
```

**Example:**

```markdown
## Summary

- **Total Tasks:** 13
- **Parallelizable Tasks:** 4
- **Total Estimated Lines:** ~640 lines
```

---

## Task Granularity Guidelines

- **Ideal count: 15-25 tasks**
- **Too many (>25):** Consider merging similar tasks
- **Too few (<10):** Consider splitting complex tasks

---

## Task Granularity Examples

### Good granularity:

```markdown
- [ ] Implement BaseError class with error code mapping ~50 lines
```

### Too coarse (needs splitting):

```markdown
- [ ] Implement entire error handling system ~500 lines
```

**Split into:**

```markdown
- [ ] Implement BaseError class ~50 lines
- [ ] Implement ErrorFormatter utility ~40 lines
- [ ] Implement error factory functions ~60 lines
- [ ] Integrate with API middleware ~80 lines
```

### Too fine (needs merging):

```markdown
- [ ] Import BaseError class ~1 line
- [ ] Define error code constant ~1 line
- [ ] Define error message constant ~1 line
```

**Merge into:**

```markdown
- [ ] Define error codes and messages ~30 lines
```

---

## File Length Guidelines

- Keep under **100 lines**
- If tasks exceed 30, consider whether the Story scope is too large

---

## Reference Information

- Project name: `{{project_name}}`
- AI Knowledge path: `{{knowledge_base_path}}`
- Constitution file: `{{constitution_path}}`
