---
name: prospec-verify
description: "Verify Implementation | 驗證實作 - Verify that implementation conforms to specifications, plan, and constitution. Triggers: verify, check, audit, quality, done, 驗證, 檢查, 品質, 做完了"
---

# Prospec Verify Skill

## Activation

When triggered, briefly describe in the user's language:
- That you'll perform a comprehensive audit of the implementation
- All 4 verification dimensions will be checked (task completion, spec compliance, Constitution full audit, tests)
- A quality grade (S/A/B/C/D) with deployment recommendation will be provided

## Startup Loading

1. Read `.prospec/changes/[name]/tasks.md` — task completion status
2. Read `.prospec/changes/[name]/plan.md` — design intent
3. Read `.prospec/changes/[name]/delta-spec.md` — file specifications
4. Read `.prospec/changes/[name]/proposal.md` — acceptance criteria
5. Read `{{constitution_path}}` — for full audit

## Key Difference from Other Skills

Other Skills only perform **spot checks** (3 most relevant principles).
Verify Skill performs a **full audit** (every Constitution principle is checked).

## Core Workflow

### Verification 1/4: Task Completion

Parse tasks.md, calculate completion rate by architecture layer.
- 100% → PASS
- < 100% → WARN (list uncompleted tasks)

### Verification 2/4: Delta Spec Compliance

Compare each file specification in delta-spec.md:
- New files exist
- Modified files contain expected changes
- API endpoints match specifications
- Type definitions are complete

Mark each item PASS / WARN / FAIL.

### Verification 3/4: Constitution Full Audit

Check **every principle** in the Constitution:
- Find **evidence** from implementation code and planning documents
- Mark PASS / WARN / FAIL with score (1-5)
- FAIL items must include specific remediation steps

### Verification 4/4: Test Verification

Check if test files exist, suggest test execution commands.

## Report Format

```
Quality Grade: [S / A / B / C / D]

S (Excellent): All PASS, score >= 4.5
A (Good): Mostly PASS, <= 2 WARN, no FAIL
B (Fair): Some WARN, no FAIL
C (Needs Improvement): Has FAIL (<= 2)
D (Poor): Multiple FAIL (> 2)

Deployment Recommendation:
- S, A: Ready to deploy
- B: Recommended to fix before deploying
- C, D: Not recommended for deployment
```

## NEVER

- **NEVER** only spot-check the Constitution — Verify must check every principle (this is its core distinction)
- **NEVER** give PASS without supporting evidence — every assessment must cite specific code or documents
- **NEVER** give FAIL without remediation steps — failures must include actionable fix steps
- **NEVER** skip any verification dimension — all 4 verifications are required
- **NEVER** continue verification when planning documents are missing — confirm document completeness first
- **NEVER** make subjective assessments — all judgments must be based on verifiable evidence
- **NEVER** ignore FAIL items and give "ready to deploy" — FAIL items are deployment blockers

## Error Handling

| Scenario | Action |
|----------|--------|
| Planning documents missing | Confirm change has gone through Story → Plan → Tasks → Implement workflow |
| Constitution file read fails | Skip Constitution audit, but clearly mark in report |
| Implementation severely mismatches spec | Pause verification, suggest updating spec or fixing implementation |

All generated files must be written in English.
